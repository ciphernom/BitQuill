(()=>{"use strict";var t={567:(t,n,e)=>{t.exports=e.p+"0fbe6e64cb78ca0ccf55.wasm"}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var _=n[r]={exports:{}};return t[r](_,_.exports,e),_.exports}let r;function o(t){const n=r.__externref_table_alloc();return r.__wbindgen_export_2.set(n,t),n}function _(t,n){try{return t.apply(this,n)}catch(t){const n=o(t);r.__wbindgen_exn_store(n)}}e.m=t,e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.p="/BitQuill/",e.b=self.location+"";const i="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&i.decode();let s=null;function c(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}function a(t,n){return t>>>=0,i.decode(c().subarray(t,t+n))}function f(t){return null==t}function u(t){const n=typeof t;if("number"==n||"boolean"==n||null==t)return`${t}`;if("string"==n)return`"${t}"`;if("symbol"==n){const n=t.description;return null==n?"Symbol":`Symbol(${n})`}if("function"==n){const n=t.name;return"string"==typeof n&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(t)){const n=t.length;let e="[";n>0&&(e+=u(t[0]));for(let r=1;r<n;r++)e+=", "+u(t[r]);return e+="]",e}const e=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(e&&e.length>1))return toString.call(t);if(r=e[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}let b=0;const l="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},g="function"==typeof l.encodeInto?function(t,n){return l.encodeInto(t,n)}:function(t,n){const e=l.encode(t);return n.set(e),{read:t.length,written:e.length}};function w(t,n,e){if(void 0===e){const e=l.encode(t),r=n(e.length,1)>>>0;return c().subarray(r,r+e.length).set(e),b=e.length,r}let r=t.length,o=n(r,1)>>>0;const _=c();let i=0;for(;i<r;i++){const n=t.charCodeAt(i);if(n>127)break;_[o+i]=n}if(i!==r){0!==i&&(t=t.slice(i)),o=e(o,r,r=i+3*t.length,1)>>>0;const n=c().subarray(o+i,o+r);i+=g(t,n).written,o=e(o,r,i,1)>>>0}return b=i,o}let d=null;function p(){return(null===d||!0===d.buffer.detached||void 0===d.buffer.detached&&d.buffer!==r.memory.buffer)&&(d=new DataView(r.memory.buffer)),d}function y(t){const n=r.__wbindgen_export_2.get(t);return r.__externref_table_dealloc(t),n}const m="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_vdfcomputer_free(t>>>0,1));class h{static __wrap(t){t>>>=0;const n=Object.create(h.prototype);return n.__wbg_ptr=t,m.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,m.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_vdfcomputer_free(t,0)}constructor(){const t=r.vdfcomputer_new();return this.__wbg_ptr=t>>>0,m.register(this,this.__wbg_ptr,this),this}static with_modulus(t){const n=w(t,r.__wbindgen_malloc,r.__wbindgen_realloc),e=b,o=r.vdfcomputer_with_modulus(n,e);if(o[2])throw y(o[1]);return h.__wrap(o[0])}compute_proof(t,n,e){const _=w(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=b,s=r.vdfcomputer_compute_proof(this.__wbg_ptr,_,i,n,f(e)?0:o(e));if(s[2])throw y(s[1]);return x.__wrap(s[0])}verify_proof(t,n){const e=w(t,r.__wbindgen_malloc,r.__wbindgen_realloc),o=b;!function(t,n){if(!(t instanceof n))throw new Error(`expected instance of ${n.name}`)}(n,x);const _=r.vdfcomputer_verify_proof(this.__wbg_ptr,e,o,n.__wbg_ptr);if(_[2])throw y(_[1]);return 0!==_[0]}estimate_iterations_for_seconds(t){const n=r.vdfcomputer_estimate_iterations_for_seconds(this.__wbg_ptr,t);return BigInt.asUintN(64,n)}}const v="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_vdfproof_free(t>>>0,1));class x{static __wrap(t){t>>>=0;const n=Object.create(x.prototype);return n.__wbg_ptr=t,v.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,v.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_vdfproof_free(t,0)}constructor(t,n,e,o,_){const i=w(t,r.__wbindgen_malloc,r.__wbindgen_realloc),s=b,c=w(n,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,f=w(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=b,l=w(o,r.__wbindgen_malloc,r.__wbindgen_realloc),g=b,d=r.vdfproof_new(i,s,c,a,f,u,l,g,_);return this.__wbg_ptr=d>>>0,v.register(this,this.__wbg_ptr,this),this}get y(){let t,n;try{const e=r.vdfproof_y(this.__wbg_ptr);return t=e[0],n=e[1],a(e[0],e[1])}finally{r.__wbindgen_free(t,n,1)}}get pi(){let t,n;try{const e=r.vdfproof_pi(this.__wbg_ptr);return t=e[0],n=e[1],a(e[0],e[1])}finally{r.__wbindgen_free(t,n,1)}}get l(){let t,n;try{const e=r.vdfproof_l(this.__wbg_ptr);return t=e[0],n=e[1],a(e[0],e[1])}finally{r.__wbindgen_free(t,n,1)}}get r(){let t,n;try{const e=r.vdfproof_r(this.__wbg_ptr);return t=e[0],n=e[1],a(e[0],e[1])}finally{r.__wbindgen_free(t,n,1)}}get iterations(){const t=r.vdfproof_iterations(this.__wbg_ptr);return BigInt.asUintN(64,t)}to_json(){let t,n;try{const _=r.vdfproof_to_json(this.__wbg_ptr);var e=_[0],o=_[1];if(_[3])throw e=0,o=0,y(_[2]);return t=e,n=o,a(e,o)}finally{r.__wbindgen_free(t,n,1)}}static from_json(t){const n=w(t,r.__wbindgen_malloc,r.__wbindgen_realloc),e=b,o=r.vdfproof_from_json(n,e);if(o[2])throw y(o[1]);return x.__wrap(o[0])}}function A(){const t={wbg:{}};return t.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},t.wbg.__wbg_call_672a4d21634d4a24=function(){return _(function(t,n){return t.call(n)},arguments)},t.wbg.__wbg_call_7cccdd69e0791ae2=function(){return _(function(t,n,e){return t.call(n,e)},arguments)},t.wbg.__wbg_crypto_574e78ad8b13b65f=function(t){return t.crypto},t.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return _(function(t,n){t.getRandomValues(n)},arguments)},t.wbg.__wbg_log_5b9c4377e97c70b5=function(t,n){console.log(a(t,n))},t.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(t){return t.msCrypto},t.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},t.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,n){return new Function(a(t,n))},t.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,n,e){return new Uint8Array(t,n>>>0,e>>>0)},t.wbg.__wbg_newwithlength_a381634e90c276d4=function(t){return new Uint8Array(t>>>0)},t.wbg.__wbg_node_905d3e251edff8a2=function(t){return t.node},t.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},t.wbg.__wbg_process_dc0fbacc7c1c06f7=function(t){return t.process},t.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return _(function(t,n){t.randomFillSync(n)},arguments)},t.wbg.__wbg_require_60cc747a6bc5215a=function(){return _(function(){return module.require},arguments)},t.wbg.__wbg_set_65595bdd868b3009=function(t,n,e){t.set(n,e>>>0)},t.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t="undefined"==typeof global?null:global;return f(t)?0:o(t)},t.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t="undefined"==typeof globalThis?null:globalThis;return f(t)?0:o(t)},t.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t="undefined"==typeof self?null:self;return f(t)?0:o(t)},t.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t="undefined"==typeof window?null:window;return f(t)?0:o(t)},t.wbg.__wbg_subarray_aa9065fa9dc5df96=function(t,n,e){return t.subarray(n>>>0,e>>>0)},t.wbg.__wbg_versions_c01dfd4722a88165=function(t){return t.versions},t.wbg.__wbg_warn_1e5be50445417c8a=function(t,n){console.warn(a(t,n))},t.wbg.__wbindgen_debug_string=function(t,n){const e=w(u(n),r.__wbindgen_malloc,r.__wbindgen_realloc),o=b;p().setInt32(t+4,o,!0),p().setInt32(t+0,e,!0)},t.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},t.wbg.__wbindgen_is_function=function(t){return"function"==typeof t},t.wbg.__wbindgen_is_object=function(t){return"object"==typeof t&&null!==t},t.wbg.__wbindgen_is_string=function(t){return"string"==typeof t},t.wbg.__wbindgen_is_undefined=function(t){return void 0===t},t.wbg.__wbindgen_memory=function(){return r.memory},t.wbg.__wbindgen_number_new=function(t){return t},t.wbg.__wbindgen_string_new=function(t,n){return a(t,n)},t.wbg.__wbindgen_throw=function(t,n){throw new Error(a(t,n))},t}async function j(t){if(void 0!==r)return r;void 0!==t&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===t&&(t=new URL(e(567),e.b));const n=A();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:_}=await async function(t,n){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,n)}catch(n){if("application/wasm"==t.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const e=await t.arrayBuffer();return await WebAssembly.instantiate(e,n)}{const e=await WebAssembly.instantiate(t,n);return e instanceof WebAssembly.Instance?{instance:e,module:t}:e}}(await t,n);return function(t,n){return r=t.exports,j.__wbindgen_wasm_module=n,d=null,s=null,r.__wbindgen_start(),r}(o,_)}const O=j;let S;self.onmessage=async t=>{const{command:n,input:e,iterations:r}=t.data;if("start"===n){S||(console.log("Worker: Initializing WASM..."),S=await O()),console.log(`Worker: Starting VDF computation with ${r} iterations...`);const t=new h,n=t=>{self.postMessage({status:"progress",progress:t})};try{const o=t.compute_proof(e,BigInt(r),n),_={y:o.y,pi:o.pi,l:o.l,r:o.r,iterations:o.iterations};self.postMessage({status:"complete",proof:_})}catch(t){console.error("Worker: VDF computation failed:",t),self.postMessage({status:"error",error:t.toString()})}}}})();